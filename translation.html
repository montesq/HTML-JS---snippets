<!doctype html>
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
<body>
<p>
	<span class="i18n-translation" key="test.pcm.key1">test1</span><br/>
	<span class="i18n-translation" key="test.pcm.key2">test2</span><br/>
	<span class="i18n-translation" key="test.pcm.key3">test3</span><br/>
	<span class="i18n-translation" key="test.pcm.key4">test4</span><br/>
	<span class="i18n-translation" key="test.pcm.key5">test5</span><br/>
	<span class="i18n-translation" key="test.pcm.key6">test6</span><br/>
	<span class="i18n-translation" key="test.pcm.key7">test7</span><br/>
	<span class="i18n-translation" key="test.pcm.key8">test8</span><br/>
</p>
<a href="#myModal" onClick="generateTranslationForm()" role="button" class="btn" data-toggle="modal">Translate</a>

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <form class="form-horizontal" method="POST" >
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
		<h3 id="myModalLabel">Translation Box</h3>
	</div>
	<div class="modal-body">
	  <fieldset>
      <div class="translation-fields control-group"></div>
    </fieldset>
	</div>
	<div class="modal-footer">
		<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
		<button class="btn" data-dismiss="modal" aria-hidden="true" onClick="applyTranslationChangesInThePage()">Test Only</button>
		<button class="btn btn-primary">Submit</button>
	</div>
	</form>
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-modal.js"></script>
<script>

function generateTranslationForm() {
  $('.translation-fields').empty();
  var translations = $('.i18n-translation');
	$.each(translations, function () {
	   var key = this.getAttribute('key');
		 var currentValue = this.textContent;
	   $('.translation-fields').append('<label class="control-label">' + key 
		                                 + '</label><div class="controls"><textarea class="translated-value" name="' + key + '">' 
																		 + currentValue + '</textarea></div>');
	});
};

function applyTranslationChangesInThePage() {
  var translatedValues = $('.translated-value');
	$.each(translatedValues, function () {
	  var key = this.getAttribute('name');
		var suggestedTranslation = this.value;
		$('[key="' + key + '"]').text(suggestedTranslation);
	});
};

</script>
</body>
</html>
